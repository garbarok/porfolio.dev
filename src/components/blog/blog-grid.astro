---
import type { CollectionEntry } from 'astro:content'
import BlogCard from './blog-card.astro'

interface Props {
  posts: CollectionEntry<'blog'>[]
  variant?: 'default' | 'compact'
  columns?: 1 | 2 | 3
  title?: string
  description?: string
}

const {
  posts,
  variant = 'default',
  columns = 3,
  title,
  description,
} = Astro.props

const gridColsClass = {
  1: 'grid-cols-1',
  2: 'lg:grid-cols-2',
  3: 'lg:grid-cols-3',
}[columns]
---

<section class="mx-auto max-w-7xl px-4 pb-24 sm:px-6 lg:px-8">
  {
    (title || description) && (
      <div class="mx-auto max-w-2xl text-center lg:max-w-none">
        {title && (
          <h2 class="text-3xl font-semibold tracking-tight text-gray-900 dark:text-white sm:text-4xl">
            {title}
          </h2>
        )}
        {description && (
          <p class="mt-2 text-lg/8 text-gray-600 dark:text-gray-300">
            {description}
          </p>
        )}
      </div>
    )
  }

  {
    variant === 'default' && (
      <div
        class={`mx-auto mt-16 grid max-w-2xl grid-cols-1 gap-x-8 gap-y-20 lg:mx-0 lg:max-w-none ${gridColsClass}`}
      >
        {posts.map((post) => (
          <BlogCard post={post} variant="default" />
        ))}
      </div>
    )
  }

  {
    variant === 'compact' && (
      <div class="-my-12 divide-y divide-gray-200 dark:divide-gray-800">
        {posts.map((post) => (
          <BlogCard post={post} variant="compact" />
        ))}
      </div>
    )
  }

  {
    posts.length === 0 && (
      <div class="mx-auto max-w-2xl text-center">
        <p class="text-gray-600 dark:text-gray-400">
          No hay art√≠culos disponibles.
        </p>
      </div>
    )
  }
</section>
