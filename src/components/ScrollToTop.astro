---
// ScrollToTop button component with smooth animations and accessibility
---

<button
  id="scroll-to-top"
  type="button"
  aria-label="Scroll to top"
  class="fixed bottom-8 right-8 z-50 flex h-12 w-12 items-center justify-center rounded-full bg-blue-600 text-white shadow-lg opacity-0 pointer-events-none transition-all duration-300 ease-in-out hover:bg-blue-700 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-500 dark:hover:bg-blue-600 dark:focus:ring-blue-400"
>
  <svg
    class="h-6 w-6"
    fill="none"
    viewBox="0 0 24 24"
    stroke="currentColor"
    aria-hidden="true"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      d="M5 10l7-7m0 0l7 7m-7-7v18"
    ></path>
  </svg>
</button>

<script>
  import { initScrollToTop, cleanupScrollToTop } from '@/utils/scrollToTop';

  // Initialize scroll-to-top functionality
  initScrollToTop();

  // Clean up before page unload (for view transitions)
  document.addEventListener('astro:before-preparation', () => {
    cleanupScrollToTop();
  });

  // Re-initialize on page navigation (for view transitions)
  document.addEventListener('astro:page-load', () => {
    initScrollToTop();
  });
</script>

<style>
  #scroll-to-top.show {
    opacity: 1;
    pointer-events: auto;
  }

  /* Respect user's motion preferences */
  @media (prefers-reduced-motion: reduce) {
    #scroll-to-top {
      transition: opacity 0.2s ease-in-out;
    }

    #scroll-to-top:hover {
      transform: none;
    }
  }
</style>
