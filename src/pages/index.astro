---
import Layout from '@layouts/Layout.astro'

import AboutMe from '@components/AboutMe.astro'
import Briefcase from '@components/icons/Briefcase.astro'
import CodeIcon from '@components/icons/Code.astro'
import Experience from '@components/Experience.astro'
import ProfileCheck from '@components/icons/ProfileCheck.astro'
import Projects from '@components/Projects.astro'
import SectionContainer from '@components/SectionContainer.astro'
import Hero from '@components/Hero.astro'
import TitleSection from '@components/TitleSection.astro'
import BlogPreview from '@components/BlogPreview.astro'
import BookOpen from '@components/icons/BookOpen.astro'
import { getLangFromUrl, useTranslations } from '@/i18n/utils'

const lang = getLangFromUrl(Astro.url)
const t = useTranslations(lang)
---

<Layout
  title={t('meta.title')}
  description={t('meta.description')}
  image="/og-image.jpg"
  type="profile"
>
  <main class="px-4">
    <SectionContainer class="py-16 md:py-36">
      <Hero />
    </SectionContainer>
    <button id="error-button">Throw test error</button>
    <script>
      function handleClick() {
        throw new Error('This is a test error')
      }
      document
        ?.querySelector('#error-button')
        ?.addEventListener('click', handleClick)
    </script>
  </main>
  <div class="space-y-24">
    <SectionContainer id="experiencia">
      <TitleSection>
        <Briefcase class="size-8" />
        {t('section.experience')}
      </TitleSection>
      <Experience />
    </SectionContainer>

    <SectionContainer id="proyectos">
      <TitleSection>
        <CodeIcon class="size-7" />
        {t('section.projects')}
      </TitleSection>
      <Projects />
    </SectionContainer>

    <SectionContainer id="sobre-mi">
      <TitleSection>
        <ProfileCheck class="size-8" />
        {t('section.about')}
      </TitleSection>
      <AboutMe />
    </SectionContainer>

    <SectionContainer id="blog">
      <TitleSection>
        <BookOpen class="size-8" />
        {t('section.blog')}
      </TitleSection>
      <BlogPreview />
    </SectionContainer>
  </div>
</Layout>
